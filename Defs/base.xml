<?xml version="1.0" encoding="utf-8" ?>
<Defs>
    <!--Paste-->
    <ThingDef Name="MealNutrientPaste" ParentName="MealRottable" Abstract="True">
        <!--<defName>MealNutrientPaste</defName>-->
        <label>nutrient paste meal</label>
        <graphicData>
            <texPath>Things/Item/Meal/NutrientPaste</texPath>
            <graphicClass>Graphic_Single</graphicClass>
        </graphicData>
        <statBases>
            <Nutrition>0.9</Nutrition>
            <MarketValue>10</MarketValue>
            <Mass>0.5</Mass>
            <DeteriorationRate>2</DeteriorationRate>
        </statBases>
    </ThingDef>

    <ThoughtDef>
        <defName>AteNutrientPasteMeal</defName>
        <showBubble>true</showBubble>
        <icon>Things/Mote/ThoughtSymbol/Food</icon>
        <durationDays>1</durationDays>
        <stages>
            <li>
                <label>ate nutrient paste</label>
                <description>I ate slimy nutrient-paste from a tube. The gear-oil from the machine gives a bit of variety to the taste, I guess.</description>
                <baseMoodEffect>-4</baseMoodEffect>
            </li>
        </stages>
    </ThoughtDef>

    <RecipeDef Name="MakeNutrientPaste" Abstract="True">
        <description>Extrude a tube of nutrient paste.</description>
        <jobString>Extruding nutrient paste.</jobString>
        <effectWorking>Cook</effectWorking>
        <soundWorking>Recipe_CookMeal</soundWorking>
        <workAmount>100</workAmount>
        <workSpeedStat>UnskilledLaborSpeed</workSpeedStat>
    </RecipeDef>

    <RecipeDef>
        <defName>MakeNutrientPasteTestRefinery</defName>
        <label>make paste</label>
        <description>Desc.</description>
        <jobString>Extruding paste</jobString>
        <effectWorking>Cremate</effectWorking>
        <soundWorking>Recipe_Cremate</soundWorking>
        <workAmount>2500</workAmount>
        <workSpeedStat>UnskilledLaborSpeed</workSpeedStat>
        <allowMixingIngredients>true</allowMixingIngredients>
        <ingredientValueGetterClass>IngredientValueGetter_Nutrition</ingredientValueGetterClass>
        <ingredients>
            <li>
                <filter>
                    <categories>
                        <li>Foods</li>
                        <li>PlantMatter</li>
                    </categories>
                    <disallowedThingDefs>
                        <li>Hay</li>
                    </disallowedThingDefs>
                </filter>
                <count>3</count>
            </li>
        </ingredients>
        <fixedIngredientFilter>
            <categories>
                <li>Foods</li>
                <li>PlantMatter</li>
            </categories>
            <disallowedThingDefs>
                <li>Hay</li>
            </disallowedThingDefs>
        </fixedIngredientFilter>
        <defaultIngredientFilter>
            <categories>
                <li>FoodRaw</li>
            </categories>
            <disallowedCategories>
                <li>MeatRaw</li>
                <li>AnimalProductRaw</li>
            </disallowedCategories>
        </defaultIngredientFilter>
        <products>
            <MealNutrientPastePlant>10</MealNutrientPastePlant>
        </products>
    </RecipeDef>

    <!-- Copied from BiofuelRefinery -->
    <ThingDef Name="NutrientPasteDispenser" ParentName="BenchBase">
        <defName>NutrientPasteDispenser</defName>
        <label>NPD (refinery)</label>
        <description>Makes paste</description>
        <thingClass>Building_WorkTable</thingClass>
        <altitudeLayer>Building</altitudeLayer>
        <passability>PassThroughOnly</passability>
        <pathCost>70</pathCost>
        <statBases>
            <MaxHitPoints>400</MaxHitPoints>
            <WorkToBuild>3000</WorkToBuild>
            <Flammability>0.5</Flammability>
        </statBases>
        <!--<minifiedDef/>-->  <!--What does this do?!?-->
        <!--<thingCategories Inherit="false"/>-->
        <size>(3,2)</size>
        <costList>
            <Steel>400</Steel>
            <ComponentIndustrial>6</ComponentIndustrial>
        </costList>
        <comps>
            <li Class="CompProperties_Power">
                <compClass>CompPowerTrader</compClass>
                <basePowerConsumption>400</basePowerConsumption>
                <shortCircuitInRain>true</shortCircuitInRain>
            </li>
            <li Class="CompProperties_Flickable"/>
            <li Class="CompProperties_Breakdownable"/>
        </comps>
        <recipes>
            <li>MakeNutrientPasteTestRefinery</li>
        </recipes>
        <castEdgeShadows>false</castEdgeShadows>
        <staticSunShadowHeight>0</staticSunShadowHeight>
        <graphicData>
            <texPath>Things/Building/Production/Refinery</texPath>
            <graphicClass>Graphic_Multi</graphicClass>
            <shaderType>CutoutComplex</shaderType>
            <drawSize>(3,2)</drawSize>
            <shadowData>
                <volume>(2.22, 0.8, 0.62)</volume>
                <offset>(0, 0, -0.13)</offset>
            </shadowData>
            <damageData>
                <rect>(0.3,0.1,2.4,1.8)</rect>
            </damageData>
        </graphicData>
        <inspectorTabs>
            <li>ITab_Bills</li>
        </inspectorTabs>
        <building>
            <spawnedConceptLearnOpportunity>BillsTab</spawnedConceptLearnOpportunity>
        </building>
        <fillPercent>0.5</fillPercent>
        <hasInteractionCell>true</hasInteractionCell>
        <interactionCellOffset>(0,0,-1)</interactionCellOffset>
        <terrainAffordanceNeeded>Heavy</terrainAffordanceNeeded>
        <designationCategory>Production</designationCategory>
        <surfaceType>Item</surfaceType>
        <constructionSkillPrerequisite>5</constructionSkillPrerequisite>
        <researchPrerequisites>
            <li>NutrientPaste</li>
        </researchPrerequisites>
    </ThingDef>

    <!--Brick-->
    <ThingDef Name="MealNutrientBrick" ParentName="MealRottable" Abstract="True">
        <!--<defName>MealNutrientBrick</defName>-->
        <label>nutrient brick meal</label>
        <graphicData>
            <texPath>Things/Item/Meal/SurvivalPack</texPath>
            <graphicClass>Graphic_Single</graphicClass>
        </graphicData>
        <statBases>
            <Nutrition>0.9</Nutrition>
            <MarketValue>10</MarketValue>
            <Mass>0.4</Mass>
            <DeteriorationRate>2</DeteriorationRate>
        </statBases>
        <ingestible>
            <preferability>MealAwful</preferability>
            <tasteThought>AteNutrientBrickMeal</tasteThought>
            <ingestEffect>EatVegetarian</ingestEffect>
            <ingestSound>Meal_Eat</ingestSound>
        </ingestible>
    </ThingDef>

    <ThoughtDef>
        <defName>AteNutrientBrickMeal</defName>
        <showBubble>true</showBubble>
        <icon>Things/Mote/ThoughtSymbol/Food</icon>
        <durationDays>1</durationDays>
        <stages>
            <li>
                <label>ate nutrient brick</label>
                <description>I ate a brick of dehydrated nutrient-paste. I'd like to say that it tastes just as bad, but now it also tastes burnt, from the dehydration process.</description>
                <baseMoodEffect>-6</baseMoodEffect>
            </li>
        </stages>
    </ThoughtDef>

    <RecipeDef Name="MakeNutrientBrick" Abstract="True">
        <description>Extrude a nutrient brick.</description>
        <jobString>Extruding nutrient brick.</jobString>
        <effectWorking>Cremate</effectWorking>
        <soundWorking>Recipe_Cremate</soundWorking>
        <workAmount>300</workAmount>
        <workSpeedStat>UnskilledLaborSpeed</workSpeedStat>
    </RecipeDef>
</Defs>
